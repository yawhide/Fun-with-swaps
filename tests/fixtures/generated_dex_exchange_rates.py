from decimal import ROUND_UP, Decimal

from models.cryptocurrency import Cryptocurrency
from models.decentalized_exchanges import DecentalizedExchange
from services.swap_token_service_interface import SwapTokenServiceInterface

BASE_PRICES = {
    Cryptocurrency.USDT: Decimal("1.00040016"),
    Cryptocurrency.SOL: Decimal("0.0055"),
    Cryptocurrency.USDC: Decimal("1.00000000"),
    Cryptocurrency.LINK: Decimal("0.07401925"),
    Cryptocurrency.RENDER: Decimal("0.15408320"),
    Cryptocurrency.WIF: Decimal("0.40650407"),
    Cryptocurrency.BONK: Decimal("35536.60270078"),
    Cryptocurrency.GRT: Decimal("5.06329114"),
    Cryptocurrency.JUP: Decimal("0.90090090"),
    Cryptocurrency.PYTH: Decimal("2.53678336"),
    Cryptocurrency.MSOL: Decimal("0.00449196"),
    Cryptocurrency.HNT: Decimal("0.18115942"),
    Cryptocurrency.POPCAT: Decimal("1.22518990"),
    Cryptocurrency.FRAX: Decimal("1.00381450"),
    Cryptocurrency.RAY: Decimal("0.42016807"),
    Cryptocurrency.MEW: Decimal("145.32771400"),
    Cryptocurrency.PYUSD: Decimal("1.00010001"),
    Cryptocurrency.BOME: Decimal("117.41223435"),
    Cryptocurrency.W: Decimal("3.36927224"),
    Cryptocurrency.JTO: Decimal("0.31645570"),
    Cryptocurrency.WOO: Decimal("5.08646999"),
    Cryptocurrency.GMT: Decimal("6.53167864"),
    Cryptocurrency.CORGIAI: Decimal("1092.77674571"),
    Cryptocurrency.PONKE: Decimal("1.79211470"),
    Cryptocurrency.BAT: Decimal("5.08905852"),
    Cryptocurrency.MMX: Decimal("0.50505051"),
    Cryptocurrency.IO: Decimal("0.34482759"),
    Cryptocurrency.TRUMP: Decimal("0.17361111"),
    Cryptocurrency.NOS: Decimal("0.37453184"),
    Cryptocurrency.USDY: Decimal("0.95238095"),
    Cryptocurrency.TBTC: Decimal("0.00001475"),
    Cryptocurrency.ZIG: Decimal("7.07213579"),
    Cryptocurrency.FXS: Decimal("0.43859649"),
    Cryptocurrency.BORG: Decimal("5.44959128"),
    Cryptocurrency.AUDIO: Decimal("6.96378830"),
    Cryptocurrency.MPLX: Decimal("3.33555704"),
    Cryptocurrency.MUMU: Decimal("14710.20888497"),
    Cryptocurrency.HONEY: Decimal("13.18913216"),
    Cryptocurrency.ORCA: Decimal("0.33557047"),
    Cryptocurrency.BILLY: Decimal("6.96378830"),
    Cryptocurrency.MYRO: Decimal("7.22021661"),
    Cryptocurrency.GIGA: Decimal("69.34812760"),
    Cryptocurrency.SUSHI: Decimal("1.39997200"),
    Cryptocurrency.WUF: Decimal("19.37721627"),
    Cryptocurrency.MOBILE: Decimal("706.21468927"),
    Cryptocurrency.SLERF: Decimal("3.79939210"),
    Cryptocurrency.MICHI: Decimal("4.22119038"),
    Cryptocurrency.C98: Decimal("6.53167864"),
    Cryptocurrency.WOLF: Decimal("78.67820614"),
    Cryptocurrency.SDEX: Decimal("68.87052342"),
    Cryptocurrency.WEN: Decimal("6349.20634921"),
    Cryptocurrency.USDP: Decimal("1.00000000"),
    Cryptocurrency.WAVES: Decimal("0.87719298"),
    Cryptocurrency.CHEX: Decimal("8.21018062"),
    Cryptocurrency.CROWN: Decimal("1.86601978"),
    Cryptocurrency.ELON: Decimal("16.18987485"),
    Cryptocurrency.CVC: Decimal("9.12408759"),
    Cryptocurrency.HFT: Decimal("5.14403292"),
    Cryptocurrency.MANEKI: Decimal("103.29511414"),
    Cryptocurrency.RETARDIO: Decimal("12.01634223"),
    Cryptocurrency.MOTHER: Decimal("11.68907072"),
    Cryptocurrency.SHDW: Decimal("2.07039337"),
    Cryptocurrency.DRIFT: Decimal("2.48200546"),
    Cryptocurrency.DADDY: Decimal("8.99280576"),
    Cryptocurrency.ACS: Decimal("550.96418733"),
    Cryptocurrency.TNSR: Decimal("2.02306292"),
    Cryptocurrency.OLAS: Decimal("0.81300813"),
    Cryptocurrency.CLOUD: Decimal("3.41880342"),
    Cryptocurrency.BWB: Decimal("2.63088661"),
    Cryptocurrency.AURA: Decimal("18.87861053"),
    Cryptocurrency.INF: Decimal("0.00443184"),
    Cryptocurrency.REN: Decimal("21.20890774"),
    Cryptocurrency.BOBAOPPA: Decimal("1069.51871658"),
    Cryptocurrency.ZEUS: Decimal("3.62581581"),
    Cryptocurrency.CWIF: Decimal("19.50268162"),
    Cryptocurrency.ZYN: Decimal("20.74688797"),
    Cryptocurrency.RAMP: Decimal("9.76562500"),
    Cryptocurrency.UXP: Decimal("100.78613183"),
    Cryptocurrency.SAMO: Decimal("103.10341272"),
    Cryptocurrency.TREMP: Decimal("2.46305419"),
    Cryptocurrency.MATH: Decimal("4.34027778"),
    Cryptocurrency.PUPS: Decimal("0.19193858"),
    Cryptocurrency.KMNO: Decimal("25.28445006"),
    Cryptocurrency.FIDA: Decimal("3.69685767"),
    Cryptocurrency.CAW: Decimal("13.32072305"),
    Cryptocurrency.BLOCK: Decimal("7.02740689"),
    Cryptocurrency.WXM: Decimal("1.50602410"),
    Cryptocurrency.EURC: Decimal("0.91743119"),
    Cryptocurrency.DEP: Decimal("677.04807041"),
    Cryptocurrency.MNDE: Decimal("7.53012048"),
    Cryptocurrency.QUACK: Decimal("10.19295259"),
    Cryptocurrency.PRCL: Decimal("3.79218809"),
    Cryptocurrency.HARAMBE: Decimal("29.22267680"),
    Cryptocurrency.KIN: Decimal("79365.07936508"),
    Cryptocurrency.ALEPH: Decimal("5.54323725"),
    Cryptocurrency.NEON: Decimal("1.73310225"),
    Cryptocurrency.GME: Decimal("209.90764064"),
    Cryptocurrency.ATLAS: Decimal("528.54122622"),
    Cryptocurrency.IOT: Decimal("968.05421104"),
    Cryptocurrency.SLND: Decimal("1.30259216"),
    Cryptocurrency.MAD: Decimal("34048.34865509"),
    Cryptocurrency.SC: Decimal("34.22313484"),
    Cryptocurrency.POLIS: Decimal("9.12408759"),
    Cryptocurrency.WAFFLES: Decimal("35.08771930"),
    Cryptocurrency.LAINESOL: Decimal("0.00472612"),
    Cryptocurrency.SCP: Decimal("2.01166767"),
    Cryptocurrency.MIMATIC: Decimal("1.00170289"),
    Cryptocurrency.MNGO: Decimal("49.33399112"),
    Cryptocurrency.PENG: Decimal("3.83729854"),
    Cryptocurrency.LOCKIN: Decimal("38.78975950"),
    Cryptocurrency.BENDOG: Decimal("41.73622705"),
    Cryptocurrency.STSOL: Decimal("0.00457645"),
    Cryptocurrency.SCS: Decimal("139.78194017"),
    Cryptocurrency.SHC: Decimal("10.01803246"),
    Cryptocurrency.KHAI: Decimal("2.46002460"),
    Cryptocurrency.OX: Decimal("187.40629685"),
    Cryptocurrency.TOOKER: Decimal("47.03668862"),
    Cryptocurrency.PRQ: Decimal("12.59287243"),
    Cryptocurrency.HAMMY: Decimal("49.72650423"),
    Cryptocurrency.BEER: Decimal("43917.43522178"),
    Cryptocurrency.MINI: Decimal("44.68275246"),
    Cryptocurrency.AURY: Decimal("3.13676286"),
    Cryptocurrency.CAT: Decimal("10.64940044"),
    Cryptocurrency.SPX: Decimal("47.75549188"),
    Cryptocurrency.VLX: Decimal("134.51708367"),
    Cryptocurrency.NATIX: Decimal("838.22296731"),
    Cryptocurrency.STEP: Decimal("17.39432945"),
    Cryptocurrency.ZOOMER: Decimal("20.37074761"),
    Cryptocurrency.TRYB: Decimal("33.46720214"),
    Cryptocurrency.NYAN: Decimal("7.73993808"),
    Cryptocurrency.TAI: Decimal("6.95410292"),
    Cryptocurrency.ZACK: Decimal("53.96654074"),
    Cryptocurrency.HXRO: Decimal("37.69317753"),
    Cryptocurrency.TAKI: Decimal("71.47962831"),
    Cryptocurrency.SLIM: Decimal("5.96658711"),
    Cryptocurrency.FLUXB: Decimal("19.06577693"),
    Cryptocurrency.CHONKY: Decimal("31094.52736318"),
    Cryptocurrency.SILLY: Decimal("62.89308176"),
    Cryptocurrency.ICHI: Decimal("0.54347826"),
    Cryptocurrency.RAKE: Decimal("4330.87916847"),
    Cryptocurrency.MONGY: Decimal("68.07351940"),
    Cryptocurrency.SNS: Decimal("36.17945007"),
    Cryptocurrency.BABY: Decimal("68073.51940095"),
    Cryptocurrency.GUMMY: Decimal("57.30659026"),
    Cryptocurrency.HXD: Decimal("26.86727566"),
    Cryptocurrency.OTK: Decimal("25.13826043"),
    Cryptocurrency.ATR: Decimal("124.73493826"),
    Cryptocurrency.HELLO: Decimal("40.50222762"),
    Cryptocurrency.CMONK: Decimal("128.12299808"),
    Cryptocurrency.HEHE: Decimal("66.18133686"),
    Cryptocurrency.ORC: Decimal("80.25682183"),
    Cryptocurrency.SRM: Decimal("30.67484663"),
    Cryptocurrency.LIKE: Decimal("28.46569883"),
    Cryptocurrency.EPIK: Decimal("71.53075823"),
    Cryptocurrency.OPN: Decimal("1103.38739932"),
    Cryptocurrency.HEGE: Decimal("85.68980291"),
    Cryptocurrency.HABIBI: Decimal("86.80555556"),
    Cryptocurrency.AMU: Decimal("51.73305742"),
    Cryptocurrency.WINR: Decimal("37.93626707"),
    Cryptocurrency.SOLAMA: Decimal("64.47453256"),
    Cryptocurrency.GYEN: Decimal("159.21031683"),
    Cryptocurrency.NPCS: Decimal("102.18679747"),
    Cryptocurrency.WATER: Decimal("7692.30769231"),
    Cryptocurrency.LAB: Decimal("108.60121633"),
    Cryptocurrency.PAJAMAS: Decimal("106.75776663"),
    Cryptocurrency.CHUD: Decimal("101.61568946"),
    Cryptocurrency.ROCKY: Decimal("111.17287382"),
    Cryptocurrency.KOKO: Decimal("14.39180243"),
    Cryptocurrency.PIP: Decimal("21.45462347"),
    Cryptocurrency.GUAC: Decimal("12.69857395"),
    Cryptocurrency.DMAGA: Decimal("116.30611770"),
    Cryptocurrency.GENE: Decimal("6.23830318"),
    Cryptocurrency.BYTE: Decimal("17.04332413"),
    Cryptocurrency.TALK: Decimal("25.12562814"),
    Cryptocurrency.CHAT: Decimal("1.16211505"),
    Cryptocurrency.DIO: Decimal("57.01254276"),
    Cryptocurrency.VCHF: Decimal("0.89285714"),
    Cryptocurrency.MBID: Decimal("4.75059382"),
    Cryptocurrency.ZEX: Decimal("21.82453077"),
    Cryptocurrency.GIKO: Decimal("1.41322781"),
    Cryptocurrency.OXY: Decimal("28.64508737"),
    Cryptocurrency.SMILEK: Decimal("18.69683089"),
    Cryptocurrency.GARI: Decimal("73.42143906"),
    Cryptocurrency.BODEN: Decimal("100.90817356"),
    Cryptocurrency.HOGE: Decimal("62150.40397763"),
    Cryptocurrency.POOH: Decimal("13.97292048"),
    Cryptocurrency.YOM: Decimal("19.40617116"),
    Cryptocurrency.PICA: Decimal("1162.11504939"),
    Cryptocurrency.MONK: Decimal("159.03307888"),
    Cryptocurrency.ROA: Decimal("52.63157895"),
    Cryptocurrency.SBR: Decimal("363.76864314"),
    Cryptocurrency.RS: Decimal("1.18147448"),
    Cryptocurrency.DUCKY: Decimal("33.35557038"),
    Cryptocurrency.MVP: Decimal("7.45712155"),
    Cryptocurrency.DUST: Decimal("5.59597090"),
    Cryptocurrency.PZP: Decimal("8.81834215"),
    Cryptocurrency.TORI: Decimal("170.35775128"),
    Cryptocurrency.ATPAY: Decimal("5.34759358"),
    Cryptocurrency.WHALES: Decimal("4.41501104"),
}
SLIPPAGE = {
    DecentalizedExchange.OPEN_BOOK: Decimal(1),  # Has the best prices
    DecentalizedExchange.ORCA: Decimal("0.99"),
    DecentalizedExchange.LIFINITY: Decimal("0.98"),
    DecentalizedExchange.RAYDIUM: Decimal("0.989"),
    DecentalizedExchange.METEORA: Decimal("0.985"),
    DecentalizedExchange.WHIRLPOOL: Decimal("0.988"),
    DecentalizedExchange.PHOENIX: Decimal("0.987"),
}


def generate_data(service: SwapTokenServiceInterface) -> None:
    counter = 0
    for cryptocurrency_sell in list(Cryptocurrency):
        for cryptocurrency_bought in list(Cryptocurrency):
            if cryptocurrency_sell != cryptocurrency_bought:
                for dex in list(DecentalizedExchange):
                    sell = BASE_PRICES[cryptocurrency_sell]
                    buy = BASE_PRICES[cryptocurrency_bought]
                    if dex not in SLIPPAGE:
                        continue
                    slippage = SLIPPAGE[dex]
                    exchange_rate = ((buy / sell) * slippage).quantize(
                        Decimal("0.000000000001"), rounding=ROUND_UP
                    )
                    service.cache_exchange_rate(
                        dex, cryptocurrency_sell, cryptocurrency_bought, exchange_rate
                    )
                    counter += 1
    print(f"Generated {counter} exchange rates")
